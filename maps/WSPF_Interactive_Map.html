<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
	<title>WSPF Interactive Map</title>
	<style type="text/css">
	body{
		font-family:arial;
		background: #89ba2c;
		
	}
	.slide-out-div-left {
		padding: 20px;
		width: 250px;
		background: #64788c;
		border: #42f5c 1px solid;
		opacity:0.8;
	}      
	.slide-out-div-right {
		padding: 20px;
		width: 250px;
		background: #64788c;
		border: #42f5c 1px solid;
		opacity:0.8;
	}
	#map-canvas {
		width: 100%;
		height: 600px;
	}
	</style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
	<script src="js/jquery.tabSlideOut.v1.3.js"></script>
	<script type="text/javascript">
	var map;
	var layer;

	// Create initial map from fusion table, display all parks
	function initialize() {
		map = new google.maps.Map(document.getElementById('map-canvas'), {
			center: new google.maps.LatLng(47.303009, -120.640421),
			zoom: 7,
			minZoom:7,
			mapTypeId: google.maps.MapTypeId.ROADMAP
		});
		layer = new google.maps.FusionTablesLayer({
			map: map,
			heatmap: { enabled: false },
			query: {
				select: "Location",
				from: "1Vo3S2tZm5EPjcdwfpHPGe_XDequChqd3bqZ8VOKw"
			},
			options: {
				styleId: 2,
				templateId: 2
			}
		});		
	}
	// Text search by park name
	function searchMap() {
		var searchQuery;
		var searchString = document.getElementById('search-string').value.replace(/'/g, "\\'");
		if(searchString != '--Select--') {
			searchQuery = "'Name' CONTAINS IGNORING CASE '" + searchString + "'"; //search query
		}
		layer.setOptions({
			query: {
				select: "'Location'",
				from: "1Vo3S2tZm5EPjcdwfpHPGe_XDequChqd3bqZ8VOKw",
				where: searchQuery
			}
		})
	}
	// For them filtering checkboxes
	function handleClickEvent(ce) {
		var names = [];
		$('input:checked').each(function() {

			names.push($(this).attr("name"));

		});
		console.log(names); 
	}
	// Park Slider Info js
	$(function(){
		$('.slide-out-div-left').tabSlideOut({
					tabHandle: '.handle',                     //class of the element that will become your tab
					pathToTabImage: 'images/info_tab.gif', //path to the image for the tab //Optionally can be set using css
					imageHeight: '122px',                     //height of tab image           //Optionally can be set using css
					imageWidth: '40px',                       //width of tab image            //Optionally can be set using css
					tabLocation: 'left',                      //side of screen where tab lives, top, right, bottom, or left
					speed: 300,                               //speed of animation
					action: 'click',                          //options: 'click' or 'hover', action to trigger animation
					topPos: '200px',                          //position from the top/ use if tabLocation is left or right
					leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
					fixedPosition: false                      //options: true makes it stick(fixed position) on scroll
				});
});

$(function(){
		$('.slide-out-div-right').tabSlideOut({
					tabHandle: '.handle2',                     //class of the element that will become your tab
					pathToTabImage: 'images/filters_tab.gif', //path to the image for the tab //Optionally can be set using css
					imageHeight: '122px',                     //height of tab image           //Optionally can be set using css
					imageWidth: '40px',                       //width of tab image            //Optionally can be set using css
					tabLocation: 'right',                      //side of screen where tab lives, top, right, bottom, or left
					speed: 300,                               //speed of animation
					action: 'click',                          //options: 'click' or 'hover', action to trigger animation
					topPos: '200px',                          //position from the top/ use if tabLocation is left or right
					leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
					fixedPosition: false                      //options: true makes it stick(fixed position) on scroll
				});
});

google.maps.event.addDomListener(window, 'load', initialize);
</script>

</head>

<body>

	<!-- Park Info slider -->
	<div class="slide-out-div-left" style= "z-index:1">
		<a class="handle" href="http://link-for-non-js-users.html">Content</a>
		<h3>Contact me</h3>
		<p>This can be a form to submit feedback, or contact info</p>
	</div>
	
	<!-- Park Filters slider -->
	<div class="slide-out-div-right" style= "z-index:1">
		<a class="handle2" href="http://link-for-non-js-users.html">Content</a>
		<h3>Contact me</h3>
		<p>This can be a form to submit feedback, or contact info</p>
		<input type="checkbox"  name="HIKING" id="1"  class="box" onclick="handleClickEvent(this);">Hiking<br /><br />
		<input type="checkbox"  name="CCSKIING" id="2"  class="box" onclick="handleClickEvent(this);">CCSKIING<br /><br />
		<input type="checkbox"  name="BIKING" id="3"  class="box" onclick="handleClickEvent(this);">BIKING<br /><br />
		<input type="checkbox"  name="HORSE" id="4"  class="box" onclick="handleClickEvent(this);">Equestrian<br /><br />
		<input type="checkbox"  name="RV" id="5"  class="box" onclick="handleClickEvent(this);">RV<br /><br />
	</div>

	<!-- Text Search -->
	<div style="margin-top: 10px; margin-bottom: 10px;">
		<label class="layer-wizard-search-label">
			Park Search
			<input type="text" id="search-string">
			<input type="button" onclick="searchMap()" value="Search">
		</label> 
	</div>

	<!-- Google Map -->
	<div id="map-canvas"></div>

	<!-- Filtering Options
	<input type="checkbox"  name="HIKING" id="1"  class="box" onclick="handleClickEvent(this);">Hiking<br /><br />
	<input type="checkbox"  name="CCSKIING" id="2"  class="box" onclick="handleClickEvent(this);">CCSKIING<br /><br />
	<input type="checkbox"  name="BIKING" id="3"  class="box" onclick="handleClickEvent(this);">BIKING<br /><br />
	<input type="checkbox"  name="HORSE" id="4"  class="box" onclick="handleClickEvent(this);">Equestrian<br /><br />
	<input type="checkbox"  name="RV" id="5"  class="box" onclick="handleClickEvent(this);">RV<br /><br />
-->
</body>
</html>
